<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1"><!-- responsive -->
	<title>Docker aide mémoire</title>
	<link rel="stylesheet" href="css/test3-zoning.css" >
	<link rel="stylesheet" href="css/test3-dropdown.css" >
	<link rel="stylesheet" href="css/sticky.css">
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/symfony.css">
	<style>
	summary{
	   margin-left:0.2em;
       overflow:auto;	/* specifique à cette page */   
	   font-size:1.5em; /* specifique à cette page */
	   padding:0.5em;
	   background:white;
	   width:96%;
	   box-shadow:
	     0px 2px 20px 0px white inset,
		 0px 2px 10px 0px ;
	  
	 }
	 .rubi{color:#33cccc;}
	 .option{color:#00cc99;}
	 /* fo pas factoriser la class idS car il est utillisé sans cette modif ailleurs(les rappels réseaux) */
	  .idS{padding-top:auto; padding-bottom:.17em;  padding-left:.5em ; padding-right:.5em;}
	</style>
</head>
<body>
	<div id="entete">
		 <img src="img/header-image.png" class="header-image" >
	</div>
	<div id="menu">
		<a href="index.html" style="background:#3d3d5c; color:#ECECEA;">Accueil</a>
		<a href="branch.html">Branch</a>
		<a href="commit.html">Commit</a>
		<a href="depotdistant.html">Dépôt distant</a>
		
		<div class="dropdown">
			<button class="dropdown-btn">Divers rappels</button>
			<div class="dropdown-content" >
			    <a href="rappels-linux.html">Linux</a>
			    <a href="#">Docker</a>
			    <a href="#">Ansible</a>
			    <a href="powershell.html">PowerShell</a>
			    <a href="symfony.html">Symfony</a>
			    <a href="anglais.html">Anglais techno</a>
			    <a href="symfony.html">Tests Unitaires</a>
			    <a href="#">Android</a>
			    <a href="interfaces-js.html" >DOM</a>						
			</div>
		</div>
	</div>
	<div id="contenu">
		<div class="colone-laterale" id="sidbarG">
			<p class="paragraphe">
					&#9203; Début:20h<br>
					&#8987; Fin HTML: 20h10<br>
					&#8987; Fin CSS et test:21h05 <br>
				
					&#9200; Durée totale: 55mn
			</p>
		</div>
		
		<div class="colone-contenu" id="contenu_">

			<h2 class="grosTitre" style="padding-top:1.5em; margin-top:1.7em; height:3.7em;  "><span class="box-shadow-titre" >Docker</span></h2>
		    <p class="boiteGris" style="height:10em;  background:#555;" ></p>
			
			<!--################################################################
			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary style="margin-left:0.2em; font-size:2em">TTTTTTTTTTTT</summary>
						 <span style="font-size:1.5em;">
							<span class="nommer">QQQQQQQQQQQ</span><br>
							<span class="idS" >RRRRRRRR</span><br>
							<span class="nommer">QQQQQQQQ</span><br>
							<span class="idS" >RRRRRRR</span><br> 
							<span class="nommer">QQQQQQQQ</span><br>
							<span class="idS" >RRRRRRRRRR</span><br>
						 </span>
					</details>
				</div>			
			</div>
			
			####################################################################-->
			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary style="margin-left:0.2em; font-size:2em">Installations</summary>
						 <span style="font-size:1.5em;">
							<span class="nommer">Windows</span><br>
							<span class="idS" >https://www.docker.com/products/docker-desktop</span><br>
							<span class="nommer">MacOS</span><br>
							<span class="idS" >https://www.docker.com/products/docker-desktop</span><br> 
							<span class="nommer">Linux (Debian/Ubuntu)</span><br>
							<span class="idS" >curl -s<span class="numVersion">SL</span> https://get.docker.com/ | sh</span><br>
						 </span>
					</details>
				</div>			
			</div>
			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary style="margin-left:0.2em; font-size:2em">Les images</summary>
						 <span style="font-size:1.5em;">
							<span class="nommer">Chercher une image</span><br>
							<span class="idS" >docker search nginx</span><br>
							<span class="nommer">Récupérer une image</span><br>
							<span class="idS" >docker pull nginx</span><br> 
							<span class="nommer">Lancer un conteneur</span><br>
							<span class="nommer" style="color:black">
								&nbsp;&bull;&nbsp;Démarre l’image <span class="nommer">ubuntu:latest</span><br>
								&nbsp;&bull;&nbsp;<span class="numVersion">--rm</span> supprime le container avant de le relancer.<br>
								&nbsp;&bull;&nbsp;Déclare le port 80 du conteneur sur le port 3000 de votre machine.<br>
								&nbsp;&bull;&nbsp;Monte le dossier courant dans le dossier <span style="color:#006699">/data</span> du conteneur<br>
								&nbsp;&bull;&nbsp;Note: <span class="nommer">Sur Windows Vous devez remplacer</span><br> &emsp;&emsp;<span class="cli">-v</span> ${PWD}:<span style="color:#006699">/data</span> <span class="nommer">&emsp;par</span><br> &emsp;&emsp;<span class="cli">-v</span> "C:\Data":<span style="color:#006699">/data</span><br>
								&emsp;Exemple:
						    </span>
							<p class="paragraphe">
							    <span class="nommer"># *nix</span><br>
								<span class="cli">docker</span> run <span class="numVersion">--rm</span> --name <span class="nommer">monConteneur</span> -it -p <span class="cli">3000</span>:80 <span class="cli">-v</span> ${PWD}:<span style="color:#006699">/data</span> ubuntu:latest<br><br>

								<span class="nommer"># Windows</span><br>
								<span class="cli">docker</span> run <span class="numVersion">--rm</span> --name <span class="nommer">monConteneur</span> -it -p <span class="cli">3000</span>:80 <span class="cli">-v</span> "C:\Data":<span style="color:#006699">/data</span> ubuntu:latest<br>
							</p>
						 </span>
					</details>
				</div>			
			</div>
			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary>Afficher un port(du le container)  </summary>
						 <span style="font-size:1.5em;">
							<span class="nommer"><span class="numVersion">-p</span> portLocal:portContainer </span>
						 </span>
					</details>
				</div>			
			</div>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary>Afficher un dossier local(à l'intérieur du container) </summary>
						 <span style="font-size:1.5em;">
							<span class="nommer"> <span class="numVersion">-v</span> dossierLocal:dossierContaine </span>
						 </span>
					</details>
				</div>			
			</div>
			
			<h2 style="text-align:center;"> Les Logs</h2>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Afficher les logs </summary>
						 <span style="font-size:1.5em;">
							<span > <span class="cli">docker</span> logs <span class="nommer">monConteneur</span></span>
						 </span>
					</details>
				</div>			
			</div>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Afficher et suivre les logs </summary>
						 <span style="font-size:1.5em;">
							<span > <span class="cli">docker</span>  logs <span class="nommer">monConteneur</span> <span class="numVersion">-f</span> </span>
						 </span>
					</details>
				</div>			
			</div>
			<h2 style="text-align:center;"> Statistiques / Configuration</h2>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Statistiques du conteneur </summary>
						 <span style="font-size:1.5em;">
							<span > <span class="cli">docker</span> stats <span class="nommer">monConteneur</span> </span>
						 </span>
					</details>
				</div>			
			</div>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Les processus du conteneur </summary>
						 <span style="font-size:1.5em;">
							<span > <span class="cli">docker</span> top <span class="nommer">monConteneur</span> </span>
						 </span>
					</details>
				</div>			
			</div>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Les ports exposés</summary>
						 <span style="font-size:1.5em;">
							<span > <span class="cli">docker</span> port <span class="nommer">monConteneur</span> </span>
						 </span>
					</details>
				</div>			
			</div>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary>Voir les changements dans le conteneur</summary>
						 <span style="font-size:1.5em;">
							<span><span class="cli">docker</span> diff monConteneur </span>
						 </span>
					</details>
				</div>			
			</div>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary>Supprimer les images/container non utilisées</summary>
						 <span style="font-size:1.5em;">
							<span> <span class="cli">docker</span> system prune </span><br>
							<span> <span class="cli">docker</span> volume prune </span>
						 </span>
					</details>
				</div>			
			</div>
			
			
			
			<h2 style="text-align:center;"> Les images</h2>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Afficher tous les images(lister) </summary>
						 <span style="font-size:1.5em;">
							<span> <span class="cli">docker</span> images </span>
						 </span>
					</details>
				</div>			
			</div>		   
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Suppression </summary>
						 <span style="font-size:1.5em;">
							<span> <span class="cli">docker</span> <span class="numVersion">rmi</span> nginx </span>
						 </span>
					</details>
				</div>			
			</div>		   
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Faire une nouvelle image depuis un conteneur </summary>
						 <span style="font-size:1.5em;">
							<span> <span class="cli">docker</span> <span class="numVersion">commit</span> nginx </span>
						 </span>
					</details>
				</div>			
			</div>
			
			
		    <h2 style="text-align:center;"> Le Dockerfile</h2>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Dockerfile</summary>
						 <span style="font-size:1.1em;">
							<span>FROM <span  class="nommer">debian:latest</span> </span><br><br>
							<span>RUN <span class="cli">apt-get</span> update <span class="rubi">&&</span> <span class="cli">apt-get install</span> <span class="option">-y</span> <span class="cli">wget zip</span> python-pip <span class="cli">git</span> </span><br><br>
							<span class="nommer"># Ajout Yasb</span><br>
							<span>RUN pip <span class="cli">install</span> http://github.com/c4software/YASB/archive/master.zip </span><br><br>
							<span>RUN <span class="cli">mkdir</span> /sources/</span><br>
							<span>WORKDIR /sources/ </span>
						 </span>
					</details>
				</div>			
			</div>
            <div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Build </summary>
						 <span style="font-size:1.5em;">
							<span class="nommer"> <span class="cli">docker</span> build  <span class="option">-t</span> exemple/yasb . </span>
						 </span>
					</details>
				</div>			
			</div>

            <h2 style="text-align:center;"> Nettoyage</h2>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Suppression des images et conteneurs non utilisé </summary>
						 <span style="font-size:1.5em;">
							<span class="nommer"> <span class="cli">docker</span> system prune </span><br>
							<span class="nommer"> <span class="cli">docker</span> volume prune </span>
						 </span>
					</details>
				</div>			
			</div>
			
			
			
			
			<h2 style="text-align:center;"> Docker Compose</h2>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Lancer une stack au premier plan </summary>
						 <span style="font-size:1.5em;">
							<span class="nommer"> <span class="cli">docker</span> compose up </span>
						 </span>
					</details>
				</div>			
			</div>
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Lancer une stack en arrière plan </summary>
						 <span style="font-size:1.5em;">
							<span class="nommer"> <span class="cli">docker</span> compose up <span class="option">-d</span> </span>
						 </span>
					</details>
				</div>			
			</div>
			
			
			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Afficher les stacks </summary>
						 <span style="font-size:1.5em;">
							<span> <span class="cli">docker</span> compose <span class="cli">ps</span> </span>
						 </span>
					</details>
				</div>			
			</div>			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Afficher les logs </summary>
						 <span style="font-size:1.5em;">
							<span> <span class="cli">docker</span> compose <span class="cli">logs</span> </span>
						 </span>
					</details>
				</div>			
			</div>			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Afficher et suivre les logs </summary>
						 <span style="font-size:1.5em;">
							<span>  <span class="cli">docker</span> compose <span class="cli">logs</span> <span class="option">-f</span> </span>
						 </span>
					</details>
				</div>			
			</div>			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Afficher les logs d'un service </summary>
						 <span style="font-size:1.5em;">
							<span>docker compose logs -f NomDuService</span>
						 </span>
					</details>
				</div>			
			</div>			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Arrêter une stack </summary>
						 <span style="font-size:1.5em;">
							<span> docker compose down </span>
						 </span>
					</details>
				</div>			
			</div>			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Arrêter et supprimer les volumes </summary>
						 <span style="font-size:1.5em;">
							<span> docker compose down -v</span>
						 </span>
					</details>
				</div>			
			</div>
			
		

			
			
			
			
			
			
			

			
			<!-- ###################################################################### 
			

					
			ENONCE A PLUSIEURS LIGNES
			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> Question à plusieurs lignes</summary>
						 <span style="font-size:1.5em;">
							<span class="nommer">reponse </span>
						 </span>
					</details>
				</div>			
			</div>
			
			###################################################################### -->
			

			<!-- #####################################################################
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> anglais </summary>
						 <span style="font-size:1.5em;">
							<span> français </span>
						 </span>
					</details>
				</div>			
			</div>
			#########################################################################-->

			<!--
			
		   <div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<details  >
						 <summary> anglais </summary>
						 <span style="font-size:1.5em;">
							<span> français </span>
						 </span>
					</details>
				</div>			
			</div>
			
			-->
			
			<div class="boiteGris" style="padding-bottom:1em; padding-top:1em; ">
				<div class="plancheCadre" style="float:none; position:relative;" >
					<h5 style="margin-left:0.2em; ">Souces:</h5>
					<p class="paragraphe">
					  <b style="font-size:1.1em;"> <a style="text-decoration:none;" target="_blanck" href="https://cours.brosseau.ovh/cheatsheets/docker/">Valentin Brosseau</a></b>
					</p>
					<p class="paragraphe">
					   <b style="font-size:1.1em;"> <a style="text-decoration:none;" target="_blanck" href="https://www.youtube.com/watch?v=SYMPIdMC2qo">Informatique sans complexes</a> </b>
					</p>
				</div>			
			</div>
		</div><!-- #colone-contenu -->	
		
		<div class="colone-laterale" id="sidbarD" >
			<p class="paragraphe" style="background:#8c8b81" >
				&#9203; Début:20h<br>
				&#8987; Fin HTML: 20h10<br>
				&#8987; Fin CSS et test:21h05 <br>
				&#8986; Durée totale: 55mn
			</p>
		</div>
	</div>
	<div style="clear:both"></div>
	<div id="footer" >
		<table class="footer-table" >
		  <tr>
			 <td class="footer-td" style="width:20%;">
				 <span style="color:#f7f7f9;" >&#8718; Proprierés:</span><br>
				 &emsp;&bull; offsetTop<br>
				 &emsp;&bull; pageYOffset<br>
				 <span style="color:#f7f7f9;" >&#8718; Méthodes:</span><br>
				 &emsp;&bull; classList.add();<br>
				 &emsp;&bull; classList.toggle();		 
			 </td>
			 
			 <td class="footer-td" style="width:20%;">
                <b class="titre-video" >&emsp;Superflus</b>
                <video  class="img footer-image"    controls="controls" >
				         <source src="videos/commit-superflu.mp4" type="video/mp4" />			       
				</video>	 
			 </td>
			 <td class="footer-td" style="width:20%;" >
				 <span style="color:#f7f7f9;" >&#8718; Proprierés:</span><br>
				 &emsp;&bull; offsetTop<br>
				 &emsp;&bull; pageYOffset<br>
				 <span style="color:#f7f7f9;" >&#8718; Méthodes:</span><br>
				 &emsp;&bull; classList.add("newClassName");<br>
				 &emsp;&bull; classList.toggle("newClassName");		 
			 </td>
		  </tr>
		</table>
	</div><!-- #footer -->
    <script type="text/javascript" src="js/sticky.js"></script>
</body>
</html>